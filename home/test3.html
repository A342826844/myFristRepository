<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>upload模块快速使用</title>
  <link rel="stylesheet" href="./layui/css/layui.css" media="all">
</head>
<body>
  <div id="box"></div>
 
<script src="./layui/layui.js"></script>
<script src="https://cdn.bootcss.com/jquery/1.11.0/jquery.min.js"></script>
<script>
  function uploadele(ele,options){
    var timestamp = + new Date();
    layui.use('element', function(){
      var element = layui.element;
    });
    var doc = '<button type="button" class="layui-btn" id="'+timestamp+'"><i class="layui-icon">&#xe67c;</i>上传图片</button>'
    var prog = '<div class="layui-progress"><div class="layui-progress-bar" lay-percent="10%"></div></div>'
    
    ele.after($(prog));
    ele.after($(doc));

    layui.use('upload', function(){
    var upload = layui.upload;
    
    //执行实例
    var uploadInst = upload.render({
      elem: '#'+timestamp //绑定元素
      ,url: 'http://rap2api.taobao.org/app/mock/120150/api/upload' //上传接口
      ,done: function(res){
        //上传完毕回调
        console.log(1)
      }
      ,error: function(err){
        //请求异常回调
        console.log('err')
      }
    });
  });
  }
  var load = $('<input />');
  var box = $('#box');
  load.appendTo(box);
  uploadele(load)
</script>
</body>
</html>